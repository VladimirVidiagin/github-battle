"use strict";(self.webpackChunkgithub_battle=self.webpackChunkgithub_battle||[]).push([[683],{683:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var n=s(43),r=s(463),a=s(579);const c=e=>{let{children:t}=e;const[s,r]=(0,n.useState)(!1);return(0,a.jsx)("div",{onMouseOver:()=>{r(!0)},onMouseOut:()=>{r(!1)},children:t(s)})},l={position:"relative",display:"flex"},i=e=>{let{children:t,element:s}=e;return(0,a.jsx)(c,{children:e=>(0,a.jsxs)("div",{style:l,children:[e&&s,t]})})};var o=s(971);function h(e){let{created_at:t,forked_count:s,language:n,updated_at:r,watchers:c,login:l}=e;return(0,a.jsxs)("ul",{className:"tooltip stack",children:[(0,a.jsxs)("li",{className:"split",children:[(0,a.jsx)("span",{children:"By:"})," ",(0,a.jsx)("span",{children:l})]}),n&&(0,a.jsxs)("li",{className:"split",children:[(0,a.jsx)("span",{children:"Language:"})," ",(0,a.jsx)("span",{children:n})]}),(0,a.jsxs)("li",{className:"split",children:[(0,a.jsx)("span",{children:"Created:"})," ",(0,a.jsx)("span",{children:new Date(t).toLocaleDateString()})]}),(0,a.jsxs)("li",{className:"split",children:[(0,a.jsx)("span",{children:"Updated:"})," ",(0,a.jsx)("span",{children:new Date(r).toLocaleDateString()})]}),(0,a.jsxs)("li",{className:"split",children:[(0,a.jsx)("span",{children:"Watchers:"}),(0,a.jsx)("span",{children:c.toLocaleString()})]}),s&&(0,a.jsxs)("li",{className:"split",children:[(0,a.jsx)("span",{children:"Forked:"})," ",(0,a.jsx)("span",{children:s.toLocaleString()})]})]})}function d(){return(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{style:{width:"5%"},children:o.Nf}),(0,a.jsx)("th",{style:{width:"50%"},children:"Repository"}),(0,a.jsx)("th",{style:{width:"15%"},children:"Stars"}),(0,a.jsx)("th",{style:{width:"15%"},children:"Forks"}),(0,a.jsx)("th",{style:{width:"15%"},children:"OpenIssue"})]})})}function u(e){let{index:t,owner:s,stargazers_count:n,forks:r,open_issues:c,name:l,created_at:o,language:d,updated_at:u,watchers:p,forked_count:x}=e;const{login:j,avatar_url:g,type:f}=s;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:t+1}),(0,a.jsx)("td",{children:(0,a.jsx)(i,{element:(0,a.jsx)(h,{forked_count:x,created_at:o,language:d,updated_at:u,watchers:p,type:f,login:j}),children:(0,a.jsxs)("div",{className:"row gap-md",children:[(0,a.jsx)("img",{width:32,height:32,className:"avatar",src:g,alt:"Avatar for ".concat(j)}),(0,a.jsx)("a",{href:"https://github.com/".concat(j,"/").concat(l),children:l})]})})}),(0,a.jsx)("td",{children:n}),(0,a.jsx)("td",{children:r}),(0,a.jsx)("td",{children:c})]})}function p(e){let{repos:t}=e;return(0,a.jsxs)("table",{children:[(0,a.jsx)(d,{}),(0,a.jsx)("tbody",{children:t.map(((e,t)=>(0,a.jsx)(u,{index:t,...e},t)))})]})}const x=e=>{let{selectedLanguage:t,onUpdateLanguage:s}=e;return(0,a.jsx)("select",{onChange:e=>s(e.target.value),value:t,children:["All","JavaScript","Ruby","Java","CSS","Python"].map((e=>(0,a.jsx)("option",{value:e,children:e},e)))})},j=()=>{const[e,t]=(0,n.useState)("All"),[s,c]=(0,n.useState)(null),[l,i]=(0,n.useState)(null);(0,n.useEffect)((()=>{o(e)}),[e]);const o=e=>{t(e),i(null),(0,r.V)(e).then((e=>{c(e),i(null)})).catch((e=>{console.warn("Error fetching repos ",e),i("There was an error fetching repositories")}))};return(0,a.jsxs)("main",{className:"stack main-stack animate-in",children:[(0,a.jsxs)("div",{className:"split",children:[(0,a.jsx)("h1",{children:"Popular"}),(0,a.jsx)(x,{selectedLanguage:e,onUpdateLanguage:o})]}),l&&(0,a.jsx)("p",{className:"text-center error",children:l}),s&&(0,a.jsx)(p,{repos:s})]})}},463:(e,t,s)=>{s.d(t,{H:()=>h,V:()=>r});const n="?client_id=".concat("YOUR_CLIENT_ID","&client_secret=").concat("YOUR_SECRET_ID");function r(e){const t=window.encodeURI("https://api.github.com/search/repositories?q=stars:>1+language:".concat(e,"&sort=stars&order=desc&type=Repositories"));return fetch(t).then((e=>e.json())).then((e=>{if(!e.items)throw new Error(e.message);return e.items}))}function a(e,t){return"Not Found"===e?"".concat(t," doesn't exist"):e}function c(e){return fetch("https://api.github.com/users/".concat(e,"/repos").concat(n,"&per_page=100")).then((e=>e.json())).then((t=>{if(t.message)throw new Error(a(t.message,e));return t}))}function l(e,t){return 3*e+function(e){return e.reduce(((e,t)=>{let{stargazers_count:s}=t;return e+s}),0)}(t)}function i(e){return Promise.all([(t=e,fetch("https://api.github.com/users/".concat(t).concat(n)).then((e=>e.json())).then((e=>{if(e.message)throw new Error(a(e.message,t));return e}))),c(e)]).then((e=>{let[t,s]=e;return{profile:t,score:l(t.followers,s)}}));var t}function o(e){return e.sort(((e,t)=>t.score-e.score))}function h(e){return Promise.all([i(e[0]),i(e[1])]).then(o)}}}]);
//# sourceMappingURL=683.d9732730.chunk.js.map